name: 'Get a gem version'
author: 'The Foreman team'
outputs:
  gem-version:
    description: "Gem version"
    value: ${{ steps.get-gem-version.outputs.gem-version }}
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v3
    - uses: ruby/setup-ruby@v1
      with:
        ruby-version: 2.7
    - id: get-gem-version
      run: |
        VER=$(ruby -rrubygems -e 'puts Gem::Specification::load(Dir.glob("*.gemspec")[0]).version')
        echo "gem-version=$VER" >> $GITHUB_OUTPUT
      shell: bash
